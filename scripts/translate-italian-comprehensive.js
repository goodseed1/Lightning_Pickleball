#!/usr/bin/env node

/**
 * Comprehensive Italian Translation Script
 * Translates ALL remaining untranslated keys in it.json
 */

const fs = require('fs');
const path = require('path');

const EN_PATH = path.join(__dirname, '../src/locales/en.json');
const IT_PATH = path.join(__dirname, '../src/locales/it.json');

// Read JSON files
const enJson = JSON.parse(fs.readFileSync(EN_PATH, 'utf8'));
const itJson = JSON.parse(fs.readFileSync(IT_PATH, 'utf8'));

// Deep merge utility
function deepMerge(target, source) {
  const output = { ...target };
  for (const key in source) {
    if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {
      output[key] = deepMerge(target[key] || {}, source[key]);
    } else {
      output[key] = source[key];
    }
  }
  return output;
}

// Comprehensive Italian translations
const italianTranslations = {
  services: {
    match: {
      createMatch: 'Crea Partita',
      viewMatches: 'Visualizza Partite',
      upcomingMatches: 'Partite in Programma',
      completedMatches: 'Partite Completate',
      cancelMatch: 'Annulla Partita',
      editMatch: 'Modifica Partita',
      matchDetails: 'Dettagli Partita',
      confirmMatch: 'Conferma Partita',
      declineMatch: 'Rifiuta Partita',
      noMatchesFound: 'Nessuna partita trovata',
      matchCreated: 'Partita creata con successo',
      matchUpdated: 'Partita aggiornata con successo',
      matchCancelled: 'Partita annullata con successo',
      matchConfirmed: 'Partita confermata con successo',
      matchDeclined: 'Partita rifiutata con successo',
      invalidMatchData: 'Dati partita non validi',
      matchNotFound: 'Partita non trovata',
      noPermission: 'Non hai il permesso di modificare questa partita',
      dateTime: 'Data e Ora',
      location: 'Posizione',
      players: 'Giocatori',
      status: 'Stato',
      result: 'Risultato',
      notes: 'Note',
      host: 'Organizzatore',
      opponent: 'Avversario',
      pending: 'In Attesa',
      confirmed: 'Confermata',
      completed: 'Completata',
      cancelled: 'Annullata',
      declined: 'Rifiutata',
    },
    club: {
      createClub: 'Crea Club',
      editClub: 'Modifica Club',
      deleteClub: 'Elimina Club',
      viewClubs: 'Visualizza Club',
      joinClub: 'Unisciti al Club',
      leaveClub: 'Lascia il Club',
      clubDetails: 'Dettagli Club',
      members: 'Membri',
      events: 'Eventi',
      announcements: 'Annunci',
      settings: 'Impostazioni',
      clubName: 'Nome Club',
      description: 'Descrizione',
      location: 'Posizione',
      memberCount: 'Numero di Membri',
      admin: 'Amministratore',
      moderator: 'Moderatore',
      member: 'Membro',
      clubCreated: 'Club creato con successo',
      clubUpdated: 'Club aggiornato con successo',
      clubDeleted: 'Club eliminato con successo',
      joinedClub: 'Iscritto al club con successo',
      leftClub: 'Hai lasciato il club con successo',
      noClubsFound: 'Nessun club trovato',
      invalidClubData: 'Dati club non validi',
      clubNotFound: 'Club non trovato',
      alreadyMember: 'Sei già membro di questo club',
      notMember: 'Non sei membro di questo club',
      noPermission: 'Non hai il permesso di modificare questo club',
    },
    league: {
      createLeague: 'Crea Lega',
      editLeague: 'Modifica Lega',
      deleteLeague: 'Elimina Lega',
      viewLeagues: 'Visualizza Leghe',
      joinLeague: 'Unisciti alla Lega',
      leaveLeague: 'Lascia la Lega',
      leagueDetails: 'Dettagli Lega',
      standings: 'Classifiche',
      schedule: 'Calendario',
      rules: 'Regole',
      prizes: 'Premi',
      leagueName: 'Nome Lega',
      startDate: 'Data Inizio',
      endDate: 'Data Fine',
      format: 'Formato',
      skillLevel: 'Livello di Abilità',
      maxParticipants: 'Max Partecipanti',
      registrationDeadline: 'Scadenza Iscrizione',
      leagueCreated: 'Lega creata con successo',
      leagueUpdated: 'Lega aggiornata con successo',
      leagueDeleted: 'Lega eliminata con successo',
      joinedLeague: 'Iscritto alla lega con successo',
      leftLeague: 'Hai lasciato la lega con successo',
      noLeaguesFound: 'Nessuna lega trovata',
      invalidLeagueData: 'Dati lega non validi',
      leagueNotFound: 'Lega non trovata',
      alreadyRegistered: 'Sei già iscritto a questa lega',
      registrationClosed: 'Iscrizioni chiuse',
      leagueFull: 'Lega al completo',
      noPermission: 'Non hai il permesso di modificare questa lega',
    },
    tournament: {
      createTournament: 'Crea Torneo',
      editTournament: 'Modifica Torneo',
      deleteTournament: 'Elimina Torneo',
      viewTournaments: 'Visualizza Tornei',
      registerForTournament: 'Iscriviti al Torneo',
      withdrawFromTournament: 'Ritirati dal Torneo',
      tournamentDetails: 'Dettagli Torneo',
      bpaddle: 'Tabellone',
      participants: 'Partecipanti',
      rounds: 'Turni',
      tournamentName: 'Nome Torneo',
      format: 'Formato',
      entryFee: 'Quota di Iscrizione',
      prize: 'Premio',
      tournamentCreated: 'Torneo creato con successo',
      tournamentUpdated: 'Torneo aggiornato con successo',
      tournamentDeleted: 'Torneo eliminato con successo',
      registered: 'Iscritto al torneo con successo',
      withdrawn: 'Ritirato dal torneo con successo',
      noTournamentsFound: 'Nessun torneo trovato',
      invalidTournamentData: 'Dati torneo non validi',
      tournamentNotFound: 'Torneo non trovato',
      tournamentFull: 'Torneo al completo',
      registrationClosed: 'Iscrizioni chiuse',
      alreadyRegistered: 'Sei già iscritto a questo torneo',
      noPermission: 'Non hai il permesso di modificare questo torneo',
    },
    user: {
      profile: 'Profilo',
      editProfile: 'Modifica Profilo',
      settings: 'Impostazioni',
      statistics: 'Statistiche',
      achievements: 'Obiettivi',
      friends: 'Amici',
      messages: 'Messaggi',
      notifications: 'Notifiche',
      privacy: 'Privacy',
      account: 'Account',
      logout: 'Disconnetti',
      deleteAccount: 'Elimina Account',
      profileUpdated: 'Profilo aggiornato con successo',
      settingsUpdated: 'Impostazioni aggiornate con successo',
      invalidUserData: 'Dati utente non validi',
      userNotFound: 'Utente non trovato',
      emailAlreadyExists: 'Email già esistente',
      usernameAlreadyExists: 'Nome utente già esistente',
      passwordTooWeak: 'Password troppo debole',
      passwordsDoNotMatch: 'Le password non corrispondono',
      emailNotVerified: 'Email non verificata',
      accountDeleted: 'Account eliminato con successo',
      confirmDeleteAccount:
        'Sei sicuro di voler eliminare il tuo account? Questa azione non può essere annullata.',
    },
    notification: {
      matchInvite: 'Invito a Partita',
      matchConfirmed: 'Partita Confermata',
      matchCancelled: 'Partita Annullata',
      matchReminder: 'Promemoria Partita',
      friendRequest: 'Richiesta di Amicizia',
      friendAccepted: 'Richiesta di Amicizia Accettata',
      clubInvite: 'Invito al Club',
      leagueInvite: 'Invito alla Lega',
      tournamentInvite: 'Invito al Torneo',
      announcement: 'Annuncio',
      systemUpdate: 'Aggiornamento Sistema',
      newMessage: 'Nuovo Messaggio',
      markAsRead: 'Segna come Letto',
      markAllAsRead: 'Segna Tutti come Letti',
      deleteNotification: 'Elimina Notifica',
      noNotifications: 'Nessuna notifica',
      notificationSettings: 'Impostazioni Notifiche',
      enablePushNotifications: 'Abilita Notifiche Push',
      enableEmailNotifications: 'Abilita Notifiche Email',
      notificationPreferences: 'Preferenze Notifiche',
    },
    error: {
      network: 'Errore di rete. Controlla la tua connessione.',
      server: 'Errore del server. Riprova più tardi.',
      notFound: 'Risorsa non trovata.',
      unauthorized: 'Non autorizzato. Effettua il login.',
      forbidden: 'Accesso negato.',
      validation: 'Errore di validazione. Controlla i tuoi dati.',
      timeout: 'Richiesta scaduta. Riprova.',
      unknown: 'Si è verificato un errore sconosciuto.',
      tryAgain: 'Riprova',
      contactSupport: 'Contatta il Supporto',
    },
  },

  duesManagement: {
    title: 'Gestione Quote',
    viewDues: 'Visualizza Quote',
    payDues: 'Paga Quote',
    dueHistory: 'Storico Quote',
    upcomingDues: 'Quote in Scadenza',
    overdueDues: 'Quote Scadute',
    paidDues: 'Quote Pagate',
    amount: 'Importo',
    dueDate: 'Data Scadenza',
    status: 'Stato',
    paid: 'Pagato',
    unpaid: 'Non Pagato',
    overdue: 'Scaduto',
    pending: 'In Attesa',
    payNow: 'Paga Ora',
    viewDetails: 'Visualizza Dettagli',
    paymentMethod: 'Metodo di Pagamento',
    creditCard: 'Carta di Credito',
    debitCard: 'Carta di Debito',
    bankTransfer: 'Bonifico Bancario',
    cash: 'Contanti',
    paymentSuccessful: 'Pagamento effettuato con successo',
    paymentFailed: 'Pagamento fallito',
    confirmPayment: 'Conferma Pagamento',
    cancelPayment: 'Annulla Pagamento',
    refundPayment: 'Rimborsa Pagamento',
    paymentHistory: 'Storico Pagamenti',
    invoice: 'Fattura',
    receipt: 'Ricevuta',
    downloadReceipt: 'Scarica Ricevuta',
    sendReceipt: 'Invia Ricevuta',
    recurringDues: 'Quote Ricorrenti',
    oneTimeDues: 'Quote Singole',
    monthlyDues: 'Quote Mensili',
    quarterlyDues: 'Quote Trimestrali',
    annualDues: 'Quote Annuali',
    duesSettings: 'Impostazioni Quote',
    autoPayment: 'Pagamento Automatico',
    enableAutoPayment: 'Abilita Pagamento Automatico',
    disableAutoPayment: 'Disabilita Pagamento Automatico',
    paymentReminder: 'Promemoria Pagamento',
    reminderDays: 'Giorni Promemoria',
    reminderSent: 'Promemoria Inviato',
    latePaymentFee: 'Penale Ritardo',
    waiveFee: 'Cancella Penale',
    feeWaived: 'Penale Cancellata',
    totalDue: 'Totale Dovuto',
    totalPaid: 'Totale Pagato',
    balance: 'Saldo',
    noPaymentMethod: 'Nessun metodo di pagamento configurato',
    addPaymentMethod: 'Aggiungi Metodo di Pagamento',
    editPaymentMethod: 'Modifica Metodo di Pagamento',
    deletePaymentMethod: 'Elimina Metodo di Pagamento',
    defaultPaymentMethod: 'Metodo di Pagamento Predefinito',
    setAsDefault: 'Imposta come Predefinito',
    paymentMethodAdded: 'Metodo di pagamento aggiunto',
    paymentMethodUpdated: 'Metodo di pagamento aggiornato',
    paymentMethodDeleted: 'Metodo di pagamento eliminato',
    invalidPaymentMethod: 'Metodo di pagamento non valido',
    expiredPaymentMethod: 'Metodo di pagamento scaduto',
    insufficientFunds: 'Fondi insufficienti',
    paymentDeclined: 'Pagamento rifiutato',
    refundProcessing: 'Rimborso in elaborazione',
    refundCompleted: 'Rimborso completato',
    refundFailed: 'Rimborso fallito',
    partialPayment: 'Pagamento Parziale',
    fullPayment: 'Pagamento Completo',
    installmentPayment: 'Pagamento Rateale',
    installments: 'Rate',
    installmentPlan: 'Piano di Rateizzazione',
    nextPayment: 'Prossimo Pagamento',
    remainingBalance: 'Saldo Residuo',
    paymentSchedule: 'Piano di Pagamento',
    schedulePayment: 'Programma Pagamento',
    cancelScheduledPayment: 'Annulla Pagamento Programmato',
    scheduledPayments: 'Pagamenti Programmati',
    noScheduledPayments: 'Nessun pagamento programmato',
    duesDescription: 'Descrizione Quote',
    duesCategory: 'Categoria Quote',
    membershipDues: 'Quote Associative',
    eventDues: 'Quote Evento',
    facilityDues: 'Quote Struttura',
    otherDues: 'Altre Quote',
    duesReport: 'Report Quote',
    generateReport: 'Genera Report',
    exportReport: 'Esporta Report',
    printReport: 'Stampa Report',
    filterByStatus: 'Filtra per Stato',
    filterByDate: 'Filtra per Data',
    filterByMember: 'Filtra per Membro',
    searchDues: 'Cerca Quote',
    sortBy: 'Ordina per',
    sortByDate: 'Ordina per Data',
    sortByAmount: 'Ordina per Importo',
    sortByStatus: 'Ordina per Stato',
    noDuesFound: 'Nessuna quota trovata',
    loadingDues: 'Caricamento quote...',
    refreshDues: 'Aggiorna Quote',
    duesSummary: 'Riepilogo Quote',
    memberDues: 'Quote Membro',
    clubDues: 'Quote Club',
    totalOutstanding: 'Totale da Pagare',
    collectionRate: 'Tasso di Riscossione',
    averagePaymentTime: 'Tempo Medio di Pagamento',
    duesAnalytics: 'Analisi Quote',
    paymentTrends: 'Tendenze Pagamento',
    delinquentMembers: 'Membri Morosi',
    sendReminder: 'Invia Promemoria',
    sendBulkReminder: 'Invia Promemoria di Massa',
    remindersSent: 'Promemoria Inviati',
    customReminder: 'Promemoria Personalizzato',
    reminderTemplate: 'Template Promemoria',
    emailReminder: 'Promemoria Email',
    smsReminder: 'Promemoria SMS',
    pushReminder: 'Promemoria Push',
    reminderSchedule: 'Piano Promemoria',
    firstReminder: 'Primo Promemoria',
    secondReminder: 'Secondo Promemoria',
    finalReminder: 'Promemoria Finale',
    gracePeriod: 'Periodo di Grazia',
    suspendMembership: 'Sospendi Iscrizione',
    reinstateForPayment: 'Riattiva per Pagamento',
    membershipSuspended: 'Iscrizione Sospesa',
    membershipReinstated: 'Iscrizione Riattivata',
    paymentPlan: 'Piano di Pagamento',
    requestPaymentPlan: 'Richiedi Piano di Pagamento',
    approvePaymentPlan: 'Approva Piano di Pagamento',
    rejectPaymentPlan: 'Rifiuta Piano di Pagamento',
    paymentPlanRequested: 'Piano di Pagamento Richiesto',
    paymentPlanApproved: 'Piano di Pagamento Approvato',
    paymentPlanRejected: 'Piano di Pagamento Rifiutato',
    minimumPayment: 'Pagamento Minimo',
    paymentDueReminder: 'Promemoria Scadenza Pagamento',
    overdueNotice: 'Avviso di Morosità',
    finalNotice: 'Avviso Finale',
    accountSuspension: 'Sospensione Account',
    collections: 'Riscossioni',
    writeOff: 'Svalutazione',
    disputePayment: 'Contesta Pagamento',
    paymentDisputed: 'Pagamento Contestato',
    resolveDispute: 'Risolvi Contestazione',
    disputeResolved: 'Contestazione Risolta',
  },

  leagueDetail: {
    title: 'Dettagli Lega',
    overview: 'Panoramica',
    standings: 'Classifiche',
    schedule: 'Calendario',
    rules: 'Regole',
    participants: 'Partecipanti',
    statistics: 'Statistiche',
    leagueInfo: 'Informazioni Lega',
    leagueName: 'Nome Lega',
    description: 'Descrizione',
    format: 'Formato',
    skillLevel: 'Livello di Abilità',
    startDate: 'Data Inizio',
    endDate: 'Data Fine',
    registrationDeadline: 'Scadenza Iscrizione',
    maxParticipants: 'Max Partecipanti',
    currentParticipants: 'Partecipanti Attuali',
    status: 'Stato',
    organizer: 'Organizzatore',
    location: 'Posizione',
    contactInfo: 'Informazioni Contatto',
    joinLeague: 'Unisciti alla Lega',
    leaveLeague: 'Lascia la Lega',
    editLeague: 'Modifica Lega',
    deleteLeague: 'Elimina Lega',
    shareLeague: 'Condividi Lega',
    standingsTable: 'Tabella Classifiche',
    rank: 'Posizione',
    player: 'Giocatore',
    matchesPlayed: 'Partite Giocate',
    wins: 'Vittorie',
    losses: 'Sconfitte',
    winRate: '% Vittorie',
    points: 'Punti',
    gamesWon: 'Game Vinti',
    gamesLost: 'Game Persi',
    gameDifferential: 'Differenza Game',
    upcomingMatches: 'Partite in Programma',
    completedMatches: 'Partite Completate',
    matchDate: 'Data Partita',
    matchTime: 'Ora Partita',
    court: 'Campo',
    versus: 'vs',
    result: 'Risultato',
    score: 'Punteggio',
    noMatchesScheduled: 'Nessuna partita in programma',
    noMatchesCompleted: 'Nessuna partita completata',
    leagueRules: 'Regole Lega',
    matchFormat: 'Formato Partita',
    scoringSystem: 'Sistema di Punteggio',
    tiebreakRules: 'Regole Tiebreak',
    schedulingRules: 'Regole Calendario',
    rainPolicy: 'Politica Pioggia',
    makeupMatches: 'Partite di Recupero',
    defaultRules: 'Regole Default',
    conductCode: 'Codice di Condotta',
    participantList: 'Lista Partecipanti',
    registeredPlayers: 'Giocatori Iscritti',
    waitlist: "Lista d'Attesa",
    playerProfile: 'Profilo Giocatore',
    contactPlayer: 'Contatta Giocatore',
    viewProfile: 'Visualizza Profilo',
    leagueStats: 'Statistiche Lega',
    topPlayers: 'Top Giocatori',
    longestWinStreak: 'Striscia Vittorie Più Lunga',
    longestLoseStreak: 'Striscia Sconfitte Più Lunga',
    closestMatches: 'Partite Più Equilibrate',
    biggestUpsets: 'Sorprese Più Grandi',
    averageMatchDuration: 'Durata Media Partita',
    totalMatchesPlayed: 'Totale Partite Giocate',
    activePlayers: 'Giocatori Attivi',
    inactivePlayers: 'Giocatori Inattivi',
    leagueLeaders: 'Leader Lega',
    mostWins: 'Più Vittorie',
    highestWinRate: '% Vittorie Più Alta',
    mostGamesWon: 'Più Game Vinti',
    notifications: 'Notifiche',
    enableNotifications: 'Abilita Notifiche',
    matchReminders: 'Promemoria Partite',
    standingsUpdates: 'Aggiornamenti Classifiche',
    announcements: 'Annunci',
    leagueChat: 'Chat Lega',
    sendMessage: 'Invia Messaggio',
    viewMessages: 'Visualizza Messaggi',
    files: 'File',
    uploadFile: 'Carica File',
    downloadFile: 'Scarica File',
    photos: 'Foto',
    uploadPhoto: 'Carica Foto',
    viewGallery: 'Visualizza Galleria',
    prizes: 'Premi',
    firstPlace: 'Primo Posto',
    secondPlace: 'Secondo Posto',
    thirdPlace: 'Terzo Posto',
    participation: 'Partecipazione',
    sponsors: 'Sponsor',
    viewSponsors: 'Visualizza Sponsor',
    becomeASponsor: 'Diventa Sponsor',
    feedback: 'Feedback',
    leaveFeedback: 'Lascia Feedback',
    viewFeedback: 'Visualizza Feedback',
    rating: 'Valutazione',
    comments: 'Commenti',
    exportData: 'Esporta Dati',
    printSchedule: 'Stampa Calendario',
    printStandings: 'Stampa Classifiche',
    leagueHistory: 'Storico Lega',
    pastSeasons: 'Stagioni Precedenti',
    viewPastSeason: 'Visualizza Stagione Precedente',
    champions: 'Campioni',
    hallOfFame: "Albo d'Oro",
  },

  clubLeaguesTournaments: {
    title: 'Leghe e Tornei del Club',
    leagues: 'Leghe',
    tournaments: 'Tornei',
    viewAll: 'Visualizza Tutto',
    activeLeagues: 'Leghe Attive',
    upcomingLeagues: 'Leghe in Arrivo',
    completedLeagues: 'Leghe Completate',
    activeTournaments: 'Tornei Attivi',
    upcomingTournaments: 'Tornei in Arrivo',
    completedTournaments: 'Tornei Completati',
    createLeague: 'Crea Lega',
    createTournament: 'Crea Torneo',
    joinLeague: 'Unisciti alla Lega',
    joinTournament: 'Iscriviti al Torneo',
    leaveLeague: 'Lascia la Lega',
    withdrawTournament: 'Ritirati dal Torneo',
    leagueDetails: 'Dettagli Lega',
    tournamentDetails: 'Dettagli Torneo',
    registrationOpen: 'Iscrizioni Aperte',
    registrationClosed: 'Iscrizioni Chiuse',
    inProgress: 'In Corso',
    completed: 'Completato',
    cancelled: 'Annullato',
    postponed: 'Posticipato',
    startDate: 'Data Inizio',
    endDate: 'Data Fine',
    registrationDeadline: 'Scadenza Iscrizione',
    participants: 'Partecipanti',
    maxParticipants: 'Max Partecipanti',
    format: 'Formato',
    skillLevel: 'Livello di Abilità',
    entryFee: 'Quota di Iscrizione',
    prizes: 'Premi',
    rules: 'Regole',
    schedule: 'Calendario',
    standings: 'Classifiche',
    bpaddle: 'Tabellone',
    matches: 'Partite',
    results: 'Risultati',
    statistics: 'Statistiche',
    leaderboard: 'Classifica',
    myLeagues: 'Le Mie Leghe',
    myTournaments: 'I Miei Tornei',
    registered: 'Iscritto',
    notRegistered: 'Non Iscritto',
    registerNow: 'Iscriviti Ora',
    viewDetails: 'Visualizza Dettagli',
    editEvent: 'Modifica Evento',
    cancelEvent: 'Annulla Evento',
    postponeEvent: 'Posticipa Evento',
    shareEvent: 'Condividi Evento',
    notifications: 'Notifiche',
    enableNotifications: 'Abilita Notifiche',
    matchReminders: 'Promemoria Partite',
    resultsUpdates: 'Aggiornamenti Risultati',
    announcements: 'Annunci',
    noLeagues: 'Nessuna lega disponibile',
    noTournaments: 'Nessun torneo disponibile',
    loadingEvents: 'Caricamento eventi...',
    refreshEvents: 'Aggiorna Eventi',
    filterBy: 'Filtra per',
    filterByStatus: 'Filtra per Stato',
    filterBySkillLevel: 'Filtra per Livello',
    filterByDate: 'Filtra per Data',
    sortBy: 'Ordina per',
    sortByDate: 'Ordina per Data',
    sortByParticipants: 'Ordina per Partecipanti',
    sortByName: 'Ordina per Nome',
    searchEvents: 'Cerca Eventi',
    eventHistory: 'Storico Eventi',
    upcomingEvents: 'Eventi in Arrivo',
    pastEvents: 'Eventi Passati',
    eventCalendar: 'Calendario Eventi',
    monthView: 'Vista Mese',
    weekView: 'Vista Settimana',
    dayView: 'Vista Giorno',
    listView: 'Vista Lista',
    exportCalendar: 'Esporta Calendario',
    addToCalendar: 'Aggiungi al Calendario',
    eventReminders: 'Promemoria Eventi',
    setReminder: 'Imposta Promemoria',
    reminderSet: 'Promemoria Impostato',
    eventOrganizer: 'Organizzatore Evento',
    contactOrganizer: 'Contatta Organizzatore',
    eventLocation: 'Posizione Evento',
    directions: 'Indicazioni',
    parking: 'Parcheggio',
    facilities: 'Strutture',
    amenities: 'Servizi',
  },

  clubTournamentManagement: {
    title: 'Gestione Tornei Club',
    createTournament: 'Crea Torneo',
    editTournament: 'Modifica Torneo',
    deleteTournament: 'Elimina Torneo',
    tournamentSettings: 'Impostazioni Torneo',
    basicInfo: 'Informazioni Base',
    tournamentName: 'Nome Torneo',
    description: 'Descrizione',
    tournamentType: 'Tipo Torneo',
    format: 'Formato',
    skillLevel: 'Livello di Abilità',
    category: 'Categoria',
    singleElimination: 'Eliminazione Diretta',
    doubleElimination: 'Doppia Eliminazione',
    roundRobin: "Girone all'Italiana",
    mixed: 'Misto',
    registration: 'Iscrizione',
    registrationPeriod: 'Periodo Iscrizione',
    startDate: 'Data Inizio',
    endDate: 'Data Fine',
    registrationDeadline: 'Scadenza Iscrizione',
    maxParticipants: 'Max Partecipanti',
    minParticipants: 'Min Partecipanti',
    currentParticipants: 'Partecipanti Attuali',
    waitlistEnabled: "Lista d'Attesa Abilitata",
    autoAcceptRegistrations: 'Accettazione Automatica Iscrizioni',
    requireApproval: 'Richiedi Approvazione',
    entryFee: 'Quota di Iscrizione',
    feeAmount: 'Importo Quota',
    paymentRequired: 'Pagamento Richiesto',
    paymentMethods: 'Metodi di Pagamento',
    refundPolicy: 'Politica Rimborsi',
    schedule: 'Calendario',
    createSchedule: 'Crea Calendario',
    autoGenerateSchedule: 'Genera Calendario Automaticamente',
    manualSchedule: 'Calendario Manuale',
    matchDuration: 'Durata Partita',
    breakBetweenMatches: 'Pausa tra Partite',
    courts: 'Campi',
    assignCourts: 'Assegna Campi',
    timeSlots: 'Fasce Orarie',
    scheduleConflicts: 'Conflitti Calendario',
    resolveConflicts: 'Risolvi Conflitti',
    bpaddle: 'Tabellone',
    generateBpaddle: 'Genera Tabellone',
    seedParticipants: 'Testa di Serie Partecipanti',
    randomSeeding: 'Teste di Serie Casuali',
    manualSeeding: 'Teste di Serie Manuali',
    byesAllocation: 'Assegnazione Bye',
    bpaddleView: 'Vista Tabellone',
    updateBpaddle: 'Aggiorna Tabellone',
    printBpaddle: 'Stampa Tabellone',
    participants: 'Partecipanti',
    participantList: 'Lista Partecipanti',
    addParticipant: 'Aggiungi Partecipante',
    removeParticipant: 'Rimuovi Partecipante',
    approveParticipant: 'Approva Partecipante',
    rejectParticipant: 'Rifiuta Partecipante',
    participantDetails: 'Dettagli Partecipante',
    contactParticipant: 'Contatta Partecipante',
    checkInParticipant: 'Check-in Partecipante',
    participantCheckedIn: 'Partecipante in Check-in',
    noShow: 'Assente',
    matches: 'Partite',
    upcomingMatches: 'Partite in Programma',
    liveMatches: 'Partite in Corso',
    completedMatches: 'Partite Completate',
    matchDetails: 'Dettagli Partita',
    enterScore: 'Inserisci Punteggio',
    confirmScore: 'Conferma Punteggio',
    disputeScore: 'Contesta Punteggio',
    rescheduleMatch: 'Riprogramma Partita',
    cancelMatch: 'Annulla Partita',
    walkover: 'Walkover',
    retirement: 'Ritiro',
    defaultWin: 'Vittoria per Default',
    results: 'Risultati',
    matchResults: 'Risultati Partite',
    roundResults: 'Risultati Turno',
    finalResults: 'Risultati Finali',
    standings: 'Classifiche',
    liveStandings: 'Classifiche Live',
    finalStandings: 'Classifiche Finali',
    prizes: 'Premi',
    prizeStructure: 'Struttura Premi',
    firstPlace: 'Primo Posto',
    secondPlace: 'Secondo Posto',
    thirdPlace: 'Terzo Posto',
    consolationPrize: 'Premio Consolazione',
    participationPrize: 'Premio Partecipazione',
    awardPrizes: 'Assegna Premi',
    prizesAwarded: 'Premi Assegnati',
    rules: 'Regole',
    tournamentRules: 'Regole Torneo',
    matchRules: 'Regole Partita',
    scoringRules: 'Regole Punteggio',
    conductRules: 'Regole Comportamento',
    penaltyRules: 'Regole Penalità',
    tiebreakRules: 'Regole Tiebreak',
    officials: 'Ufficiali',
    assignOfficials: 'Assegna Ufficiali',
    referee: 'Arbitro',
    umpire: 'Giudice di Sedia',
    linesman: 'Giudice di Linea',
    courtSupervisor: 'Supervisore Campo',
    notifications: 'Notifiche',
    sendNotification: 'Invia Notifica',
    bulkNotification: 'Notifica di Massa',
    matchReminders: 'Promemoria Partite',
    resultsUpdates: 'Aggiornamenti Risultati',
    announcements: 'Annunci',
    reports: 'Report',
    generateReport: 'Genera Report',
    participationReport: 'Report Partecipazione',
    matchReport: 'Report Partite',
    financialReport: 'Report Finanziario',
    exportReport: 'Esporta Report',
    printReport: 'Stampa Report',
  },
};

// Count untranslated keys
function countUntranslatedKeys(en, it, path = '') {
  let count = 0;
  let details = [];

  for (const key in en) {
    const currentPath = path ? `${path}.${key}` : key;

    if (typeof en[key] === 'object' && en[key] !== null && !Array.isArray(en[key])) {
      const nested = countUntranslatedKeys(en[key], it[key] || {}, currentPath);
      count += nested.count;
      details = details.concat(nested.details);
    } else {
      // Check if translation is missing or same as English
      if (!it[key] || it[key] === en[key]) {
        count++;
        details.push({
          path: currentPath,
          english: en[key],
          italian: it[key] || '[MISSING]',
        });
      }
    }
  }

  return { count, details };
}

// Apply translations
console.log('Applying Italian translations...\n');

const beforeCount = countUntranslatedKeys(enJson, itJson);
console.log(`Before: ${beforeCount.count} untranslated keys`);

// Merge translations
const updatedItJson = deepMerge(itJson, italianTranslations);

// Count after
const afterCount = countUntranslatedKeys(enJson, updatedItJson);
console.log(`After: ${afterCount.count} untranslated keys`);
console.log(`Translated: ${beforeCount.count - afterCount.count} keys\n`);

// Save updated Italian file
fs.writeFileSync(IT_PATH, JSON.stringify(updatedItJson, null, 2), 'utf8');
console.log('✅ Italian translations saved to it.json\n');

// Show top 10 sections still needing translation
if (afterCount.count > 0) {
  const sectionCounts = {};
  afterCount.details.forEach(detail => {
    const topSection = detail.path.split('.')[0];
    sectionCounts[topSection] = (sectionCounts[topSection] || 0) + 1;
  });

  const sortedSections = Object.entries(sectionCounts)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 10);

  console.log('Top 10 sections still needing translation:');
  sortedSections.forEach(([section, count]) => {
    console.log(`  ${section}: ${count} keys`);
  });
}

console.log('\n✅ Translation complete!');
