# 번개 테니스 앱 생태계 헌장 (v1.0 - 초안, Deprecated)

## 서문

우리는 시간과 장소, 소속의 제약 없이 모든 테니스인이 자유롭게 만나고, 경쟁하며, 성장할 수 있는 디지털 생태계를 구축하는 것을 목표로 한다. '번개 테니스'는 단순한 매칭 앱이 아니다. 이것은 당신의 모든 테니스 여정이 기록되고, 성과가 존중받으며, 전 세계의 동료들과 영원히 공존하는 **살아있는 디지털 테니스 세상**이다. 본 헌장은 이 자생(自生)하는 생태계의 번영을 위한 핵심 원칙과 규칙을 규정한다.

---

## 제1장: 핵심 원칙 (Core Principles)

### 제1조 (자율성)

모든 경기는 사용자에 의해, 사용자를 위해 자율적으로 생성되고 운영된다. 번개 테니스는 중앙에서 통제하는 리그가 아닌, 사용자가 만들어가는 풀뿌리 커뮤니티를 지향한다.

### 제2조 (접근성)

실력 향상의 기회는 모두에게 평등해야 한다. 번개 테니스는 가입비나 참가비를 받지 않으며, 앱 내에서 누구나 쉽게 상대를 찾고 경기를 주선할 수 있는 가장 편리한 도구를 제공한다.

### 제3조 (공정성)

모든 경기의 결과는 객관적이고 공정한 ELO 레이팅 시스템을 통해 실력으로 증명된다. 승리와 패배는 당신을 성장시키는 데이터가 되며, 어제의 나보다 더 나은 플레이어가 되기 위한 동기를 부여한다.

### 제4조 (투명성)

모든 공식 경기 기록과 랭킹, 그리고 획득한 트로피는 모든 사용자에게 투명하게 공개된다. 당신의 모든 성과는 커뮤니티의 역사가 되어 영구히 보존된다.

### 제5조 (존중)

디지털 공간에서의 예의와 실제 코트에서의 스포츠맨십은 우리 커뮤니티를 지탱하는 가장 중요한 가치이다. 모든 사용자는 서로를 존중하며, 공정한 경쟁과 즐거운 교류를 최우선으로 한다.

---

## 제2장: 랭킹 및 스킬 레벨 시스템

### 제1조 (두 개의 실력 지표)

모든 사용자는 두 가지 실력 지표를 가진다.

1. **자체 평가 레벨 (Self-Assessed Level):** 가입 시 또는 프로필 수정 시, 사용자가 스스로 선택하는 실력 **'범위'** (예: "3.0-3.5"). 이 지표는 시스템이 사용자의 실력을 판단할 데이터가 부족할 때 사용된다.

2. **시스템 계산 레벨 (System-Calculated Level):** 공식 번개 매치 결과에 따라 ELO 레이팅 시스템이 계산하는 정확한 실력 **'값'** (예: 3.2). 이 지표는 사용자의 현재 경쟁력을 나타내는 공식적인 레벨이다.

### 제2조 (시즌과 랭킹)

1. 시즌은 1년에 4회, 분기별로 진행된다 (겨울, 봄, 여름, 가을).
2. 사용자는 한 시즌 동안 **최소 5번의 공식 번개 매치**를 완료해야 해당 시즌의 공식 랭킹과 레벨이 확정된다.
3. 5번 미만의 경기를 치른 사용자의 결과는 ELO 점수에는 반영되지만, 해당 시즌의 공식 랭킹에는 포함되지 않는다.

### 제3조 (ELO 재경기 제한)

공정한 랭킹 시스템을 위해, ELO 점수가 반영되는 공식 경기는 동일한 상대를 대상으로 **3개월에 한 번**으로 제한된다.

- **단식:** 동일한 두 선수 간의 경기는 3개월에 한 번만 랭킹에 반영된다.
- **복식:** 완전히 동일한 팀 조합([A,B] vs [C,D])만 3개월 제한이 적용된다. 팀 구성원 중 한 명이라도 다르면 기록경기로 인정된다.
- 제한 기간 내의 재경기는 '친선 경기'로 진행할 수 있으며, 경기 기록에는 남지만 ELO 점수 변동은 없다.

---

## 제3장: 공식 번개 매치 규칙

### 제1조 (경기 생성 및 종류)

모든 사용자는 '단식' 또는 '복식' 형태의 공식 번개 매치를 자유롭게 생성할 수 있다.

### 제2조 (참가자 규칙)

1. **호스트 자동 참여:** 클럽 소속이 아닌 '공용 번개 매치'의 경우, 호스트는 경기를 생성하는 즉시 첫 번째 참가자로 자동 등록된다.
2. **인원 제한:** 단식은 총 2명, 복식은 총 4명으로 참가 인원이 제한된다. 더 많은 참가를 원할 경우, 새로운 번개 매치를 생성해야 한다.

### 제3조 (비용)

모든 참가비는 무료이다. 코트 예약 및 테니스 공 준비는 경기 참여자들이 상호 협의하여 해결한다.

### 제4조 (스코어 기록)

경기 종료 후, 승자는 경기 결과를 앱에 기록할 의무가 있다. 패자는 기록된 점수를 확인하고 이의가 있을 경우 상호 합의 하에 수정할 수 있다.

---

## 제4장: 트로피 및 명예의 전당

### 제1조 (시즌 트로피)

매 시즌이 끝날 때마다, 5경기 이상 참여한 모든 사용자는 자신의 성과에 따라 다음과 같은 트로피를 받는다.

- **랭크업 트로피:** 이전 시즌보다 시스템 계산 레벨이 상승한 모든 선수.
- **최고 승률 트로피:** 해당 시즌에 가장 높은 승률을 기록한 선수.
- **성실 트로피:** 해당 시즌에 가장 많은 공식 경기를 치른 선수.

### 제2조 (피드 공지)

시즌 종료 시, 주요 부문에서 뛰어난 성과를 거둔 선수들의 명단이 앱의 메인 피드에 공지되어 모든 사용자로부터 축하를 받는다.

### 제3조 (영구 보존)

획득한 모든 트로피는 사용자의 프로필 내 '명예의 전당'에 영구히 보존 및 전시되며, 모든 사용자가 볼 수 있다.

---

**결론**

이 헌장은 '번개 테니스'가 단순한 앱을 넘어, 모두가 함께 만들고 발전시켜나가는 **지속 가능한 디지털 테니스 세계**로 나아가기 위한 초석이 될 것입니다.

_최초 제정: 2025년 9월_  
_버전: 1.0_

---

## 🎯 번개 테니스 앱 생태계 헌장 (v1.1 - 최종 공식 버전)

> **참고**: v1.0은 초안으로, v1.1이 현재 적용되는 공식 정책입니다.

#### **제2장: 랭킹 및 스킬 레벨 시스템 (수정)**

- **제1조 (두 개의 독립된 랭킹 시스템):** '번개 테니스'에는 두 개의 완전히 독립된 랭킹 시스템이 존재한다.
  1.  **전체 ELO 랭킹 (Global ELO Ranking):** 오직 '공용 번개 매치'의 결과만이 반영되는, 사용자의 전역적인 공식 실력 지표이다.
  2.  **클럽 랭킹 (Club Ranking):** 각 클럽 내부의 리그/토너먼트 결과만이 반영되는, 해당 클럽 커뮤니티 내에서의 독립적인 순위이다.

- **제2조 (기록의 분리):**
  1.  사용자의 프로필에는 '전체 ELO 랭킹'과 '클럽 랭킹'이 명확하게 분리되어 표시된다.
  2.  '경기 기록' 역시 '공용 경기 기록'과 '클럽 경기 기록'으로 분리하여 조회할 수 있다.

- **제3조 (상호 불간섭의 원칙):** 클럽 내부에서 진행된 어떠한 경기의 결과도 사용자의 '전체 ELO 랭킹'에 영향을 미치지 않으며, '공용 번개 매치'의 결과 역시 '클럽 랭킹'에 영향을 미치지 않는다.

_(기존의 'ELO 재경기 제한' 조항은 이제 '공용 번개 매치'에만 적용되는 것으로 명시됩니다.)_

---

### 📊 클럽 ELO 시스템 구현 상세 (Implementation Details)

> **구현 결정일**: 2025년 11월 11일
> **상태**: ✅ 기술 명세 완료, 구현 진행 중

#### **제4조 (단일 클럽 ELO 레이팅)**

각 클럽 내에서 사용자는 **하나의 통합된 클럽 ELO 레이팅**을 가진다. 이 레이팅은 클럽 리그 경기와 클럽 토너먼트 경기 모두를 반영하되, **K-Factor(변동 계수)를 차등 적용**하여 경기의 중요도를 구분한다.

**데이터 구조**:

```
users/{userId}/clubMemberships/{clubId}/
{
  clubEloRating: 1200,              // 단일 클럽 ELO (초기값: 1200)
  clubEloRatingHistory: [...]       // 최근 30개 레이팅 기록 (차트용)
}
```

#### **제5조 (K-Factor 정책: High Risk, High Return 원칙)**

**핵심 원칙**: 더 중요한 경기일수록 랭킹 변동폭이 커야 한다.

| 경기 종류         | K-Factor | 적용 대상            | 특성                   |
| ----------------- | -------- | -------------------- | ---------------------- |
| **클럽 리그**     | 16       | 모든 선수            | 안정적이고 꾸준한 성장 |
| **클럽 토너먼트** | 32       | 신규 선수 (< 10경기) | 빠른 레벨 탐색         |
| **클럽 토너먼트** | 24       | 기존 선수 (≥ 10경기) | 극적인 변동, 업셋 보상 |

**설계 근거**:

1. **토너먼트의 특수성**
   - 토너먼트는 한 번의 패배로 탈락하는 고위험 환경
   - 압박감 속에서의 승리는 진정한 실력의 증명
   - 큰 무대의 승리는 랭킹에 큰 영향을 주어야 공정함

2. **High Risk, High Return**
   - 토너먼트 우승 → 큰 랭킹 상승 (동기부여)
   - 업셋 승리 → 극적인 랭킹 점프 (공정성)
   - 다크호스 → 빠른 랭킹 상승으로 실력 인정

3. **리그의 안정성**
   - 리그는 여러 경기에 걸친 일관성 테스트
   - 낮은 K-Factor로 꾸준한 성장 유도
   - 일시적 부진이 과도하게 반영되지 않음

**예시**:

```
[토너먼트 결정전]
Player A (ELO: 1200, K=24) vs Player B (ELO: 1400, K=24)

A가 승리할 확률: 24%
A 승리 시: A +18점, B -18점 (극적인 변화!)

[같은 선수, 리그 경기]
Player A (ELO: 1200, K=16) vs Player B (ELO: 1400, K=16)

A가 승리할 확률: 24%
A 승리 시: A +12점, B -12점 (안정적 변화)
```

#### **제6조 (경기 기록 히스토리)**

모든 클럽 경기 결과는 각 사용자의 `club_match_history` 서브컬렉션에 영구 저장된다.

**데이터 구조**:

```
users/{userId}/club_match_history/{matchId}/
{
  matchId: string,
  clubId: string,
  matchType: 'singles' | 'doubles',
  matchContext: 'league' | 'tournament',

  date: Timestamp,
  opponentId: string,
  opponentName: string,
  result: 'win' | 'loss',
  score: string,

  oldElo: number,           // 경기 전 ELO
  newElo: number,           // 경기 후 ELO
  eloChange: number,        // 변동량 (+ or -)
  expectedScore: number,    // 승리 확률 (0-1)
  kFactor: number          // 적용된 K-Factor (16, 24, 32)
}
```

#### **제7조 (구현 단계)**

클럽 ELO 시스템은 다음 순서로 구현된다:

1. **Phase 1: 클럽 토너먼트 ELO (현재 진행 중)** 🔄
   - 토너먼트 완료 시 자동 ELO 계산
   - `calculateClubElo` Cloud Function 구현
   - K-Factor 정책 적용 (Tournament: K=24 or 32)
   - Match history 기록

2. **Phase 2: ELO 차트 UI 업데이트** (예정)
   - EloChart 컴포넌트에 클럽 ELO 표시 추가
   - 전체 ELO vs 클럽 ELO 탭 분리
   - Match history 시각화

3. **Phase 3: 클럽 리그 ELO** (예정)
   - 리그 시스템 구현 시 자동 통합
   - K-Factor 정책 적용 (League: K=16)

#### **제8조 (전체 ELO 시스템 - 향후 구현)**

'공용 번개 매치'를 위한 전체 ELO 시스템은 클럽 ELO와 동일한 기술 아키텍처를 사용하되, **완전히 독립된 데이터**로 관리된다.

**데이터 구조** (향후):

```
users/{userId}/
{
  globalEloRating: 1200,           // 전체 ELO
  globalEloRatingHistory: [...]    // 전체 ELO 히스토리
}

users/{userId}/global_match_history/{matchId}/
{
  // 클럽 매치 히스토리와 동일한 구조
  // 단, matchContext는 'public'
}
```

---

_최종 업데이트: 2025년 11월 11일_
_현재 버전: v1.1_
_상태: 공식 정책 (Official Policy)_
_구현 상태: 클럽 ELO Phase 1 진행 중 (전체 ELO 미구현)_
